import './polyfills.server.mjs';
import{a as y,b as u,c as G,d as I,e as L,g as _,i as N,j as R,k as T,m as D,n as F}from"./chunk-JA22B4PE.mjs";import{Ba as h,Ca as w,G as a,H as f,M as d,N as m,P as o,Q as i,R as s,S as x,T as g,Ua as b,Va as E,X as p,Z as C,ca as S,m as v}from"./chunk-KTEFYRQ4.mjs";import"./chunk-5XUXGTUW.mjs";function q(e,r){e&1&&(o(0,"p",14),s(1,"i",15),p(2," email Required "),i())}function M(e,r){e&1&&(o(0,"p",14),s(1,"i",15),p(2," invalid email "),i())}function j(e,r){if(e&1&&(o(0,"div",12),d(1,q,3,0,"p",13)(2,M,3,0,"p",13),i()),e&2){let t,n,l=g();a(),m("ngIf",(t=l.loginGroup.get("email"))==null?null:t.getError("required")),a(),m("ngIf",(n=l.loginGroup.get("email"))==null?null:n.getError("email"))}}function V(e,r){e&1&&(o(0,"p",14),s(1,"i",15),p(2," password Required "),i())}function z(e,r){e&1&&(o(0,"p",14),s(1,"i",15),p(2," password must start with upperCase then from 6 to 10 "),i())}function A(e,r){if(e&1&&(o(0,"div",12),d(1,V,3,0,"p",13)(2,z,3,0,"p",13),i()),e&2){let t,n,l=g();a(),m("ngIf",(t=l.loginGroup.get("password"))==null?null:t.getError("required")),a(),m("ngIf",(n=l.loginGroup.get("password"))==null?null:n.getError("pattern"))}}function P(e,r){e&1&&(o(0,"span"),s(1,"i",16),i())}function $(e,r){if(e&1&&(o(0,"div")(1,"p",17),p(2),i(),o(3,"p",18),p(4,"Don't have an account? Register Now."),i()()),e&2){let t=g();a(2),C(" ",t.err," ")}}var k=class e{constructor(r,t){this._ChatsService=r;this._Router=t}err="";load=!1;loginGroup=new L({email:new _("",[u.required,u.email]),password:new _("",[u.required,u.pattern(/^[a-zA-z0-9_@]{6,}$/)])});handle(){this.load=!0;let r=this.loginGroup.value;this.loginGroup.valid===!0&&this._ChatsService.login(r).subscribe({next:t=>{console.log(t),this.load=!1,localStorage.setItem("token",t.access_token),localStorage.setItem("user_id",t.user.pk),this._ChatsService.decodeDate(),this._Router.navigate(["blank/chat"])},error:t=>{this.load=!1,this.err=t.error.message}})}static \u0275fac=function(t){return new(t||e)(f(F),f(b))};static \u0275cmp=v({type:e,selectors:[["app-login"]],standalone:!0,features:[S],decls:19,vars:6,consts:[[1,"bg-main-light","w-50","mx-auto","rounded-3","mt-5","p-3"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"mb-2"],["for","email"],["type","email","formControlName","email","id","email",1,"form-control","mt-1"],["class","alert alert-danger error  p-1 m-1 w-50 mx-auto text-center  w-50 mx-auto text-center",4,"ngIf"],["for","password"],["type","password","formControlName","password","id","password",1,"form-control","mt-1"],[1,"d-flex","align-items-center","justify-content-between","item"],[1,"btn-main","d-block","my-2",3,"disabled"],[4,"ngIf"],[1,"alert","alert-danger","error","p-1","m-1","w-50","mx-auto","text-center","w-50","mx-auto","text-center"],["class","m-0 my-1",4,"ngIf"],[1,"m-0","my-1"],[1,"fa-solid","fa-triangle-exclamation","ps-1"],[1,"fas","fa-spin","fa-spinner"],[1,"p-1","w-50","text-center","mb-0","mx-auto","alert","alert-danger","error"],["routerLink","/register",1,"p-1","w-50","text-center","mb-0","mx-auto","alert","alert-info","mt-2","error"]],template:function(t,n){if(t&1&&(o(0,"section",0)(1,"h1",1),p(2,"Login Now:"),i(),o(3,"form",2),x("ngSubmit",function(){return n.handle()}),o(4,"div",3)(5,"label",4),p(6,"email:"),i(),s(7,"input",5),i(),d(8,j,3,2,"div",6),o(9,"div",3)(10,"label",7),p(11,"password:"),i(),s(12,"input",8),i(),d(13,A,3,2,"div",6),o(14,"div",9)(15,"button",10),p(16," Login "),d(17,P,2,0,"span",11),i()(),d(18,$,5,1,"div",11),i()()),t&2){let l,c;a(3),m("formGroup",n.loginGroup),a(5),m("ngIf",((l=n.loginGroup.get("email"))==null?null:l.errors)&&((l=n.loginGroup.get("email"))==null?null:l.touched)),a(5),m("ngIf",((c=n.loginGroup.get("password"))==null?null:c.errors)&&((c=n.loginGroup.get("password"))==null?null:c.touched)),a(2),m("disabled",n.loginGroup.invalid),a(2),m("ngIf",n.load),a(),m("ngIf",n.err)}},dependencies:[w,h,D,N,y,G,I,R,T,E]})};export{k as LoginComponent};
